(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{18:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(13),a=n.n(s),o=(n(18),n(6)),r=n(8),i=n.n(r),l=n(5),b=n(11),j=n(4),d=(n(20),"https://reactnd-books-api.udacity.com"),h=localStorage.token;h||(h=localStorage.token=Math.random().toString(36).substr(-8));var u={Accept:"application/json",Authorization:h},O=function(e,t){return fetch("".concat(d,"/books/").concat(e.id),{method:"PUT",headers:Object(o.a)(Object(o.a)({},u),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},f=function(e,t){return fetch("".concat(d,"/search"),{method:"POST",headers:Object(o.a)(Object(o.a)({},u),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},x=n(7),k=n(0),v=function(e){var t=e.book,n=e.handleSelections;return Object(k.jsx)("li",{children:Object(k.jsxs)("div",{className:"book",children:[Object(k.jsxs)("div",{className:"book-top",children:[t.imageLinks?Object(k.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks.thumbnail,")")}}):Object(k.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url()"}}),Object(k.jsx)("div",{className:"book-shelf-changer",children:Object(k.jsxs)("select",{onChange:function(e){n(e.target.value,t)},value:void 0!==t.shelf?t.shelf:"none",children:[Object(k.jsx)("option",{value:"dis",disabled:!0,children:void 0!==t.shelf?"Move to...":"Add to..."}),Object(k.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(k.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(k.jsx)("option",{value:"read",children:"Read"}),Object(k.jsx)("option",{value:"none",children:"None"})]})})]}),Object(k.jsx)("div",{className:"book-title",children:t.title}),t.authors?Object(k.jsx)("div",{className:"book-authors",children:t.authors.join(", ")}):""]})})},m=function(e){var t=e.handleSelections,n=e.getSearchBooks,s=e.books,a=Object(c.useState)(""),o=Object(j.a)(a,2),r=o[0],i=o[1],l=[];return""!==r&&0!==s.length&&(l=s.filter((function(e){return!(!e.authors||0===e.authors.filter((function(e){return e.toLowerCase().includes(r.toLowerCase())})).length)||(!!e.title.toLowerCase().includes(r.toLowerCase())||void 0)}))),Object(k.jsx)("div",{className:"app",children:Object(k.jsxs)("div",{className:"search-books",children:[Object(k.jsxs)("div",{className:"search-books-bar",children:[Object(k.jsx)(x.b,{className:"close-search",to:"/",children:"Close"}),Object(k.jsx)("div",{className:"search-books-input-wrapper",children:Object(k.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:r,onChange:function(e){!function(e){i(e),e&&n(e)}(e.target.value)}})})]}),Object(k.jsx)("div",{className:"search-books-results",children:Object(k.jsx)("ol",{className:"books-grid",children:l.map((function(e){return Object(k.jsx)(v,{book:e,handleSelections:t},e.id)}))})})]})})},p=function(){return Object(k.jsx)("li",{children:Object(k.jsx)("div",{className:"book",children:Object(k.jsx)("div",{className:"book-top",children:Object(k.jsx)("div",{className:"book-cover",style:{width:128,height:193}})})})})},N=function(e){var t=e.books,n=e.handleSelections;return Object(k.jsxs)("div",{className:"bookshelf",children:[Object(k.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(k.jsx)("div",{className:"bookshelf-books",children:Object(k.jsx)("ol",{className:"books-grid",children:0!==t.length?t.filter((function(e){return"currentlyReading"===e.shelf})).map((function(e){return Object(k.jsx)(v,{book:e,handleSelections:n},e.id)})):[0,0].map((function(e,t){return Object(k.jsx)(p,{},t)}))})})]})},g=function(e){var t=e.books,n=e.handleSelections;return Object(k.jsxs)("div",{className:"bookshelf",children:[Object(k.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(k.jsx)("div",{className:"bookshelf-books",children:Object(k.jsx)("ol",{className:"books-grid",children:0!==t.length?t.filter((function(e){return"read"===e.shelf})).map((function(e){return Object(k.jsx)(v,{book:e,handleSelections:n},e.id)})):[0,0,0].map((function(e,t){return Object(k.jsx)(p,{},t)}))})})]})},S=function(e){var t=e.books,n=e.handleSelections;return Object(k.jsxs)("div",{className:"bookshelf",children:[Object(k.jsx)("h2",{className:"bookshelf-title",children:"Want to Read"}),Object(k.jsx)("div",{className:"bookshelf-books",children:Object(k.jsx)("ol",{className:"books-grid",children:0!==t.length?t.filter((function(e){return"wantToRead"===e.shelf})).map((function(e){return Object(k.jsx)(v,{book:e,handleSelections:n},e.id)})):[0,0].map((function(e,t){return Object(k.jsx)(p,{},t)}))})})]})},y=function(e){var t=e.books,n=e.handleSelections;return Object(k.jsx)("div",{className:"app",children:Object(k.jsxs)("div",{className:"list-books",children:[Object(k.jsx)("div",{className:"list-books-title",children:Object(k.jsx)("h1",{children:"MyReads"})}),Object(k.jsx)("div",{className:"list-books-content",children:Object(k.jsxs)("div",{children:[Object(k.jsx)(N,{books:t,handleSelections:n}),Object(k.jsx)(S,{books:t,handleSelections:n}),Object(k.jsx)(g,{books:t,handleSelections:n})]})}),Object(k.jsx)("div",{className:"open-search",children:Object(k.jsx)(x.b,{to:"/search",children:"Add a book"})})]})})},w=n(2);var R=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)([]),r=Object(j.a)(a,2),h=r[0],x=r[1],v=Object(c.useState)([]),p=Object(j.a)(v,2),N=p[0],g=p[1],S=function(){var e=Object(b.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/books"),{headers:u}).then((function(e){return e.json()})).then((function(e){return e.books}));case 2:t=e.sent,x(t),s([].concat(Object(l.a)(t),Object(l.a)(N)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){S()}),[]);var R=function(){var e=Object(b.a)(i.a.mark((function e(t,n){var c,a,r,b,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("currentlyReading"!==n.shelf&&"wantToRead"!==n.shelf&&"read"!==n.shelf){e.next=18;break}if("none"===t){e.next=9;break}return c=h.map((function(e){return e.id===n.id?Object(o.a)(Object(o.a)({},n),{},{shelf:t}):e})),x(c),s([].concat(Object(l.a)(c),Object(l.a)(N))),e.next=7,O(n,t);case 7:e.next=16;break;case 9:return a=h.filter((function(e){return e.id!==n.id})),r=[].concat(Object(l.a)(N),[Object(o.a)(Object(o.a)({},n),{},{shelf:void 0})]),x(a),g(r),s([].concat(Object(l.a)(a),Object(l.a)(r))),e.next=16,O(n,t);case 16:e.next=26;break;case 18:if(void 0!==n.shelf){e.next=26;break}return b=[].concat(Object(l.a)(h),[Object(o.a)(Object(o.a)({},n),{},{shelf:t})]),j=N.filter((function(e){return e.id!==n.id})),x(b),g(j),s([].concat(Object(l.a)(b),Object(l.a)(j))),e.next=26,O(n,t);case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:"empty query"!==(n=e.sent).error&&(c=n.filter((function(e){return-1===h.map((function(e){return e.id})).indexOf(e.id)})),g(c),s([].concat(Object(l.a)(h),Object(l.a)(c))));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(w.c,{children:[Object(k.jsx)(w.a,{path:"/",element:Object(k.jsx)(y,{books:n,handleSelections:R})}),Object(k.jsx)(w.a,{path:"/MyReads/",element:Object(k.jsx)(y,{books:n,handleSelections:R})}),Object(k.jsx)(w.a,{path:"/search",element:Object(k.jsx)(m,{books:n,handleSelections:R,getSearchBooks:C})})]})};a.a.render(Object(k.jsx)(x.a,{children:Object(k.jsx)(R,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.687972e2.chunk.js.map
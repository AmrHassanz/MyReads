(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(13),r=n.n(a),o=(n(18),n(19),n(5)),s=n(8),i=n(6),l=n(7),j=n.n(l),b=n(4),d=n(11),u="https://reactnd-books-api.udacity.com",h=localStorage.token;h||(h=localStorage.token=Math.random().toString(36).substr(-8));var f={Accept:"application/json",Authorization:h},O=function(e,t){return fetch("".concat(u,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)(Object(i.a)({},f),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},x=function(e,t){return fetch("".concat(u,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},f),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},p=n(0),v=Object(c.createContext)([]);function k(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)([]),l=Object(o.a)(s,2),h=l[0],k=l[1],m=Object(c.useState)([]),g=Object(o.a)(m,2),N=g[0],y=g[1],w=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/books"),{headers:f}).then((function(e){return e.json()})).then((function(e){return e.books}));case 2:t=e.sent,k(t),r([].concat(Object(b.a)(t),Object(b.a)(N)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){w()}),[]);var R=function(){var e=Object(d.a)(j.a.mark((function e(t,n){var c,a,o,s,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("currentlyReading"!==n.shelf&&"wantToRead"!==n.shelf&&"read"!==n.shelf){e.next=18;break}if("none"===t){e.next=9;break}return c=h.map((function(e){return e.id===n.id?Object(i.a)(Object(i.a)({},n),{},{shelf:t}):e})),k(c),r([].concat(Object(b.a)(c),Object(b.a)(N))),e.next=7,O(n,t);case 7:e.next=16;break;case 9:return a=h.filter((function(e){return e.id!==n.id})),o=[].concat(Object(b.a)(N),[Object(i.a)(Object(i.a)({},n),{},{shelf:void 0})]),k(a),y(o),r([].concat(Object(b.a)(a),Object(b.a)(o))),e.next=16,O(n,t);case 16:e.next=26;break;case 18:if(void 0!==n.shelf){e.next=26;break}return s=[].concat(Object(b.a)(h),[Object(i.a)(Object(i.a)({},n),{},{shelf:t})]),l=N.filter((function(e){return e.id!==n.id})),k(s),y(l),r([].concat(Object(b.a)(s),Object(b.a)(l))),e.next=26,O(n,t);case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t);case 2:"empty query"!==(n=e.sent).error&&(c=n.filter((function(e){return-1===h.map((function(e){return e.id})).indexOf(e.id)})),y(c),r([].concat(Object(b.a)(h),Object(b.a)(c))));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function C(){return(C=Object(d.a)(j.a.mark((function e(t){var n,c,a,s,l,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("currentlyReading"!==(n=t.target.id)&&"wantToRead"!==n&&"read"!==n){e.next=10;break}return t.preventDefault(),c=t.dataTransfer.getData("text"),a=h.filter((function(e){return e.id===c})),s=Object(o.a)(a,1),l=s[0],d=h.map((function(e){return e.id===c?Object(i.a)(Object(i.a)({},l),{},{shelf:n}):e})),k(d),r([].concat(Object(b.a)(d),Object(b.a)(N))),e.next=10,O(l,n);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsx)(v.Provider,{value:{books:a,handleSelections:R,getSearchBooks:S,drag:function(e){e.dataTransfer.setData("text",e.target.id)},allowDrop:function(e){e.preventDefault()},drop:function(e){return C.apply(this,arguments)}},children:e.children})}var m=function(e){var t=e.book,n=Object(c.useContext)(v),a=n.handleSelections,r=n.drag;return Object(p.jsx)("li",{id:t.id,onDragStart:function(e){r(e)},draggable:"true",children:Object(p.jsxs)("div",{className:"book",children:[Object(p.jsxs)("div",{className:"book-top",children:[t.imageLinks?Object(p.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks.thumbnail,")")}}):Object(p.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url()"}}),Object(p.jsx)("div",{className:"book-shelf-changer",children:Object(p.jsxs)("select",{onChange:function(e){a(e.target.value,t)},value:void 0!==t.shelf?t.shelf:"none",children:[Object(p.jsx)("option",{value:"dis",disabled:!0,children:void 0!==t.shelf?"Move to...":"Add to..."}),Object(p.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(p.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(p.jsx)("option",{value:"read",children:"Read"}),Object(p.jsx)("option",{value:"none",children:"None"})]})})]}),Object(p.jsx)("div",{className:"book-title",children:t.title}),t.authors?Object(p.jsx)("div",{className:"book-authors",children:t.authors.join(", ")}):""]})})},g=function(){var e=Object(c.useContext)(v),t=e.books,n=e.handleSelections,a=e.getSearchBooks,r=Object(c.useState)(""),i=Object(o.a)(r,2),l=i[0],j=i[1],b=[];return""!==l&&0!==t.length&&(b=t.filter((function(e){return!(!e.authors||0===e.authors.filter((function(e){return e.toLowerCase().includes(l.toLowerCase())})).length)||(!!e.title.toLowerCase().includes(l.toLowerCase())||void 0)}))),Object(p.jsx)("div",{className:"app",children:Object(p.jsxs)("div",{className:"search-books",children:[Object(p.jsxs)("div",{className:"search-books-bar",children:[Object(p.jsx)(s.b,{className:"close-search",to:"/",children:"Close"}),Object(p.jsx)("div",{className:"search-books-input-wrapper",children:Object(p.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:l,onChange:function(e){!function(e){j(e),e&&a(e)}(e.target.value)}})})]}),Object(p.jsx)("div",{className:"search-books-results",children:Object(p.jsx)("ol",{className:"books-grid",children:b.map((function(e){return Object(p.jsx)(m,{book:e,handleSelections:n},e.id)}))})})]})})},N=function(){return Object(p.jsx)("li",{children:Object(p.jsx)("div",{className:"book",children:Object(p.jsx)("div",{className:"book-top",children:Object(p.jsx)("div",{className:"book-cover",style:{width:128,height:193}})})})})},y=function(){var e=Object(c.useContext)(v),t=e.books,n=e.allowDrop,a=e.drop;return Object(p.jsxs)("div",{className:"bookshelf",children:[Object(p.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(p.jsx)("div",{className:"bookshelf-books",children:Object(p.jsx)("ol",{className:"books-grid",id:"currentlyReading",onDrop:function(e){a(e)},onDragOver:function(e){n(e)},children:0!==t.length?t.filter((function(e){return"currentlyReading"===e.shelf})).map((function(e){return Object(p.jsx)(m,{book:e},e.id)})):[0,0].map((function(e,t){return Object(p.jsx)(N,{},t)}))})})]})},w=function(){var e=Object(c.useContext)(v),t=e.books,n=e.allowDrop,a=e.drop;return Object(p.jsxs)("div",{className:"bookshelf",children:[Object(p.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(p.jsx)("div",{className:"bookshelf-books",children:Object(p.jsx)("ol",{className:"books-grid",id:"read",onDrop:function(e){a(e)},onDragOver:function(e){n(e)},children:0!==t.length?t.filter((function(e){return"read"===e.shelf})).map((function(e){return Object(p.jsx)(m,{book:e},e.id)})):[0,0,0].map((function(e,t){return Object(p.jsx)(N,{},t)}))})})]})},R=function(){var e=Object(c.useContext)(v),t=e.books,n=e.allowDrop,a=e.drop;return Object(p.jsxs)("div",{className:"bookshelf",children:[Object(p.jsx)("h2",{className:"bookshelf-title",children:"Want to Read"}),Object(p.jsx)("div",{className:"bookshelf-books",children:Object(p.jsx)("ol",{className:"books-grid",id:"wantToRead",onDrop:function(e){a(e)},onDragOver:function(e){n(e)},children:0!==t.length?t.filter((function(e){return"wantToRead"===e.shelf})).map((function(e){return Object(p.jsx)(m,{book:e},e.id)})):[0,0].map((function(e,t){return Object(p.jsx)(N,{},t)}))})})]})},S=function(){return Object(p.jsx)("div",{className:"app",children:Object(p.jsxs)("div",{className:"list-books",children:[Object(p.jsx)("div",{className:"list-books-title",children:Object(p.jsx)("h1",{children:"MyReads"})}),Object(p.jsx)("div",{className:"list-books-content",children:Object(p.jsxs)("div",{children:[Object(p.jsx)(y,{}),Object(p.jsx)(R,{}),Object(p.jsx)(w,{})]})}),Object(p.jsx)("div",{className:"open-search",children:Object(p.jsx)(s.b,{to:"/search",children:"Add a book"})})]})})},C=n(2);var D=function(){return Object(p.jsx)(k,{children:Object(p.jsxs)(C.c,{children:[Object(p.jsx)(C.a,{path:"/",element:Object(p.jsx)(S,{})}),Object(p.jsx)(C.a,{path:"/MyReads/",element:Object(p.jsx)(S,{})}),Object(p.jsx)(C.a,{path:"/search",element:Object(p.jsx)(g,{})})]})})};r.a.render(Object(p.jsx)(s.a,{children:Object(p.jsx)(D,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.8a122a3c.chunk.js.map